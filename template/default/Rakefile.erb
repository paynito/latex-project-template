require 'latex_project_template/task'

MAIN_TEX_FILE = "<%= @main_tex_file %>"

LaTeXProjectTemplate::Task.new(MAIN_TEX_FILE) do |task|
  # task.latexmk.path = '/usr/bin/latexmk'
  # task.clean.include("#*#")
end

desc "Create snapshot pdf"
task :snapshot => :pdf do |t|
  pdf_path = FileName.create(MAIN_TEX_FILE, :add => :prohibit, :extension => '.pdf')
  snapshot_path = FileName.create("snapshot", File.basename(pdf_path), :type => :time, :directory => :parent,
                                  :position => :middle, :delimiter => '', :add => :always,
                                  :format => "%Y%m%d_%H%M%S")
  move(pdf_path, snapshot_path)
end
